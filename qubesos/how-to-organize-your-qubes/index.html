<!DOCTYPE html>
<html lang="ja-JP">
<head>
	<meta charset="utf-8">
	<title>新規ユーザー向けガイド: qubeをどのように管理するか</title>
</head>

<body>
	<link rel="stylesheet" href="/css/main.css">

	<main>
		<h1>新規ユーザー向けガイド: qubeをどのように管理するか</h1>
		<p id="update_date">更新日: 2023/05/19</p>

		<p>このページは書きかけです！</p>
		<p>このページはQubes OSの<a href="https://www.qubes-os.org/news/2022/10/28/how-to-organize-your-qubes/">公式ドキュメント</a>を翻訳したものです。訳者はただの素人なので誤訳等が含まれていると思います。あらゆる場合において英語の原文が優先です。誤訳等発見されましたら教えていただけると助かります。</p>

		<section>
			<p>人々がQubes OSについて初めて知った際の反応は、しばしば「本当に良さそう…だけど私はこれで何ができるの？」といったものになります。あなたがどのqubeを作り、それぞれのqubeで何をし、そしてあなたの管理手法がセキュリティや利便性の観点から利にかなったものであるかどうかについて、自明ではないかもしれません。</p>
			<p>それぞれのqubeは本質的にセキュアな区画であり、それを好きなだけ作成して、それらを様々な方法で接続することができます。あなたの好きなように組み上げられるという意味ではレゴブロックのようなものです。ですがあなたが何を組み上げるのか知らない場合、この制約のない自由が困難となるかもしれません。これは何かを書くために座って白紙の文書に取りかかるようなものです。可能性には終わりがなく、どこから始めるべきか分からないかもしれません。</p>
			<p>単一の正しい答えは存在しないため、どのようにqubeを管理すべきかを<b>正確に</b>教えられる人は存在しないのが真実です。正しい答えはあなたの要求、希望、設定によります。ユーザー毎に最適な設定は異なります。ですが、Qubesのユーザーや開発者へのアンケートやインタビュー、そしてQubesを何年も使用して得られた個人的な経験や知見を元にいくらかの実際的な例を提供することはできます。これらの例の一部を各々の状況に合わせて適用させることができるかもしれません。さらに重要な点としては、様々な決定の背後にある理論的根拠を確認することで、管理に関するあなたの決定に同様の思考を適用する手法を学ぶことができます。それでは始めましょう！</p>
		</section>

		<h2>ソフトウェア開発者 アリス</h2>
		<section>
			<p>アリスは異なる顧客のいくつかのプロジェクトで働くフリーランスの開発者です。プロジェクトは変化する要件と、よくあることですが異なるビルド環境を持ちます。アリスは別々のqube群をそれぞれのプロジェクトに用いています。それらは次のような命名手法で管理されています。</p>
			<code>
				clientA-code<br>
				clientA-build<br>
				clientA-test<br>
				clientA-prod<br>
				projectB-code<br>
				projectB-build-test<br>
				projectB-prod<br>
				...</code>
			<p>これはqubeの群をセットで管理するのに役立ちます。qubeのうち、いくつかは<a href="https://www.qubes-os.org/doc/templates/debian/">Debianテンプレート</a>ベースで、残りは<a href="https://www.qubes-os.org/doc/templates/fedora/">Fedoraテンプレート</a>ベースです。これはいくつかのソフトウェアパッケージが片方のディストリビューションでより容易に入手できるためです。アリスのセットアップは次のようになっています:</p>
			<img width=600 src="https://www.qubes-os.org/attachment/doc/howto_use_qubes_alice_1.png">

			<ul>
				<li><b>コードを書くためのqube。</b>ここではIDEを動かし、コードをコミットし、コミットに署名をします。これらのqubeはどのツールとどの開発環境が必要かによって異なるテンプレートを元にしています。一般に、アリスは顧客やプロジェクト毎に異なるqubeを用いることを好みます。これにより、すべてを管理された状態に置き、誤ってアクセスクレデンシャルや顧客のコードを混同させてしまうといった悲惨になりうる事態が防止されます。また、これによって彼女はコードが他の顧客から常にかつセキュアに分離されていると顧客に誠実に伝えることができるようになります。アリスはqubeのネットワークアクセスをそのqubeに必要なコードレポジトリのみに限定するために、<a href="https://www.qubes-os.org/doc/firewall">Qubes firewall</a>を使用することを好みます。これによって、ローカルネットワークやインターネット上の必要なもの以外に誤ってアクセスしてしまうことが防がれます。アリスは"自由時間"（何であれ）の楽しみである個人的なプログラミングプロジェクト用にこの種類のqubeを用いています。</li>
				<li><b>ビルドとテストのためのqube。</b>繰り返しになりますが、アリスは物事を管理された状態に置くために、それぞれの顧客やプロジェクト毎に異なるqubeを用いることを好みます。ですが、これは大量のqubeが同時に実行されている場合に面倒でかつ大量のメモリを使用し得ます。なので、アリスは追加の区画化によるわずかな利点が必要でないと判断した際には、同じqubeをビルドとテストや同様の環境を要求する異なるプロジェクトで共有します。ここでは必要な依存関係を取得し、コードをコンパイルし、ビルドツールチェーンを動かし、成果物をテストします。いくつかの場合では、彼女は<a href="https://www.qubes-os.org/doc/standalones-and-hvms/">スタンドアローン</a>が<a href="https://www.qubes-os.org/doc/how-to-install-software">異なるソフトウェアのインストール</a>をテンプレートとアプリqube双方の再起動なしに行えるために有用であると気づきました。またスタンドアローンは、ルートファイルシステムの設定ファイルに必要な（もしくは利便性のために）変更を加える際にも、アプリqubeの再起動に伴いこれらの変更が失われることを心配する必要はありません。彼女は<a href="https://www.qubes-os.org/doc/bind-dirs/">bind-dirs</a>を用いてこれらの変更を永続化させることもできると知っていますが、時にその手法を常に用いることによる行き詰まりを避け、そしてこの一つのqubeのためだけにそれを用いるのは値しないと考えています。Qubes OSが彼女をこの点で判断せず、すべてをセキュアに区画化したまま好きなようにできる自由を与えていることを彼女は密かに嬉しく思っています。この様な時、qubeの<b>中</b>が散らかって管理されていない状態でも、彼女のデジタルライフはよく管理されたままになりうるということに安心を覚えます。</li>
			</ul>
			<img width=600 src="https://www.qubes-os.org/attachment/doc/howto_use_qubes_alice_2.png">
			<ul>
				<li><b>メールのためのqube。</b>アリスはコマンドラインマニアなのでターミナルベースのメールクライアントの使用を好み、仕事用と個人用の両方のメールqubeは<a href="https://github.com/Qubes-Community/Contents/blob/master/docs/configuration/mutt.md">Mutt</a>がインストールされたテンプレートをベースにしています。PGPで署名や暗号化されたメールを送受信する場所であるメールqubeは、PGPバックエンドqube（詳しくは下記）の秘密鍵にセキュアにアクセスできます。悪意ある添付ファイルから保護するために、Muttはすべての添付ファイルを<a href="https://www.qubes-os.org/doc/how-to-use-disposables">disposable qube</a>で開くよう設定されています。</li>
				<li><b>コミュニケーションツールのためのqube。</b>Signal、Slack、Zoom、Telegram、IRC、Discordなどです。ここでは顧客とテレビ会議やチャットを行います。彼女は<a href="https://www.qubes-os.org/doc/how-to-use-usb-devices">USBパススルー</a>を用いて必要に応じそれぞれのqubeにWebカメラを接続し、使用後に取り外します。同様に、マイクについても必要な際にそれぞれのqubeにアクセスを許可し、使用後にアクセスを削除します。この方法だと、あらゆるビデオ会議ツールのミュートボタンを信頼する必要がなく、会話中以外の時に盗聴されることを心配しなくて済みます。アリスはTwitter、Reddit、Hacker NewsなどのSNSのためのqubeを人々とのやりとりと最新のトレンドへの追従のために用いています（もしくは彼女が言うには、実際のところ、特定のプログラミング言語の利点やVim vs. Emacs戦争、タブ派とスペース派の聖戦などのために）。</li>
				<li><b>GPGバックエンド保管庫。</b>保管庫はネットワークから隔離され、完全にオフラインなqubeです。この特定のqubeはアリスの秘密鍵（コード署名やメール用）を保持し、<a href="https://www.qubes-os.org/doc/split-gpg/">Split GPG</a>を経由していくつかの"フロントエンド"qubeからセキュアにアクセスさせます。Split GPGはアリスがバックエンド保管庫でPGPの処理（署名や暗号化など）を要求できると明示的に承認したフロントエンドqubeのみを許可します。その時でさえ、バックエンド保管庫以外にはアリスの秘密鍵へのアクセスを有するqubeはありません。</li>
				<li><b>パスワードマネージャー保管庫。</b>これは、もう一つの完全にオフラインでネットワークから隔離されたqubeで、アリスがオフラインのパスワードマネージャーであるKeePassXCを使用し、すべてのユーザー名とパスワードを保持します。彼女は何かしらにログインする必要がある際に<a href="https://www.qubes-os.org/doc/how-to-copy-and-paste-text/">セキュアなコピーペースト</a>を用いて他のqubeへ素早く認証情報をコピーします。</li>
				<li><b>個人用qube。</b>Qubesについて、アリスが好きなところの一つは、相互汚染を気にすることなく仕事<b>と</b>個人的な用途の両方に使用できるということです。従って、彼女はプライベートに関連するqubeもいくつか用いています。例えば、医療文書、テストの結果、ワクチンの接種履歴などを保持するオフラインの保管庫があります。また、公的文書や出生証明書、パスポートのコピーなどを保持する別の保管庫もあります。彼女は個人的なSNSアカウントを家族や学生時代からの友人と連絡を取り合うためにさらに別のqubeで使用しています。</li>
			</ul>

			<p>仕事が完了すると、アリスは成果品を送信し、その顧客のための働きが入ったqubeを<a href="https://www.qubes-os.org/doc/how-to-back-up-restore-and-migrate/">バックアップ</a>し、そしてシステムから削除します。削除したqubeが必要になったり参照したくなった時はバックアップから簡単に復元できます。それぞれのqubeの中身は仕事を完了させた時のものと全く同じです。</p>
		</section>

		<h2>調査報道の記者 ボブ</h2>
		<section>
			<p>彼の調査と報告の一環として、ボブは頻繁に怪しげなファイル、しかもしばしば匿名の出所からのものを取り扱うことを強いられます。例えば、彼が取り組んでいるうわさに関したタレコミを称する添付ファイル付きのメールを受信するかもしれません。もちろん、彼はそれがコンピューターへの感染を狙ったマルウェアたり得ることを知っています。この手の怪しげなデータをセキュアに扱い、区画化された状態に保ちマシン全体に感染させられるリスクがないため、Qubes OSはボブにとって必要不可欠な物になっています。</p>
			<p>ボブはすごい技術者ではありません。彼は重要な物事、つまり真実を明かにし、悪を暴き、潔白を証明し、社会の暗闇に光を当てることに注力するために、ツールはシンプルに保つことを好みます。彼の意識はコンピューターが技術的にどのように動作するのかということに自然と引き寄せられたりはしませんが、人々はしょっちゅうハッキングされ、彼の仕事の性質は彼をターゲットにしうるということを理解しています。彼は情報源や同僚、家族、そして彼自身を守りたいと思っています。そしてコンピューターセキュリティーがその重要な一部であると理解しています。彼は仕事専用のQubesラップトップを使用しており、それには次のものが含まれています:</p>
			<img width=600 src="https://www.qubes-os.org/attachment/doc/howto_use_qubes_bob.png">

			<ul>
				<li><b>執筆のためのオフラインqube。</b>LibreOffice Writerのみを動作させます。彼の執筆作業はすべてここで行います。基本的に情報源からもたらされたものや調査結果が表示されたウィンドウと同時に表示しています。</li>
				<li><b>複数のメール用qube。</b>一つは一般の人々からのメールを受けとるためのもので、もう一つは編集者や同僚とメールするためのものです。両方とも<a href="https://www.qubes-os.org/doc/templates/minimal/">minimalテンプレート</a>ベースでThunderbirdがインストールされています。彼は添付ファイルに自宅の場所を調べるビーコンが含まれている可能性を考えて、すべての添付ファイルをオフラインの<a href="https://www.qubes-os.org/doc/how-to-use-disposables/">disposables</a>で開くように設定しました。</li>
				<li><b>Whonix qube。</b>彼はTor経由のネットワークを使用するために標準的な<code>sys-whonix</code>サービスqubeを用意しています。そして彼が取り組んでいる噂話の調査をする際に使用するTor Browser用にdisposableな<code>anon-workstation</code>アプリqubeを用いています。テーマはしばしばセンシティブで著名人に関係するかもしれないので、調査を匿名で行うことが重要です。彼は調査対象に調査の主題が知られることを望まず、またネットワークリクエストが彼の職場や家のIPアドレスまで追跡されることも望みません。Whonixはそのどちらの懸念にも有用です。やり取りしている高リスクな内部通報者の中にはTor以外の通信手段を使用したがらない人もいるため、彼は情報をTor経由で匿名で受けとるためのもう一つのdisposableなWhonixベースのテンプレートを用意しています。</li>
				<li><b><a href="https://github.com/Qubes-Community/Contents/blob/master/docs/privacy/signal.md">Signal</a>のための二つのqube。</b>ボブは二つのSignal用アプリqubeを用いています（両方ともSignalのデスクトップアプリがインストールされた同じテンプレートを使用しています）。一つは同僚や他の信頼できる相手とやり取りするために、彼の個人の電話番号と結びつけられています。もう一つは公開用の電話番号で、情報提供者が彼と秘密裏にやり取りする追加の手段を提供しています。これはTorは使用しないが暗号化されていない通信が危険たり得る人々にとって特に有用です。</li>
				<li><b>いくつかのデータ保管庫。</b>誰かがボブに使えそうなものを送ったり、調査中に有用なものに出くわした際に、彼はそのコピーを完全にオフラインでネットワークから隔離された保管庫qubeに保存します。それらのファイルのほとんどはPDFと画像ですが、いくらかは音声、動画、テキストファイルです。大半が不明や信頼できないソースからのものであるため、ボブはそれら全てを同じ保管庫に入れることが安全かどうか分かりませんでした。なので念のために異なる保管庫（普通は噂話や話題毎に一つ）を作成しました。これには物事が管理された状態に置かれるというもう一つの利点がありました。</li>
				<li><b>業務上のリソースにアクセスするための<a href="https://github.com/Qubes-Community/Contents/blob/master/docs/configuration/vpn.md">VPN qube</a>とそれに関連するqube。</b>職場のサーバーは組織のネットワークからのみアクセスできるので、ボブはVPN qubeに接続した信頼できるqubeを使用しています。これで職場にいないときも成果物をアップロードしたり、ローカルネットワークの必要なものすべてにアクセスできます。</li>
				<li><b>パスワードマネージャー保管庫。</b>ボブはオフラインの保管庫qubeについてきた標準のパスワードマネージャーにすべてのログイン情報を保存しています。必要に応じて他のqubeに<a href="https://www.qubes-os.org/doc/how-to-copy-and-paste-text/">セキュアにコピー＆ペースト</a>できます。</li>
			</ul>

			<p>同僚が彼のQubesシステムのセットアップを手助けし、どのように使用するか教えました。ボブの作業方法はシンプルで一貫していたので、彼のqubeの管理方法は多くを変えず、彼もそれで問題ありませんでした。同僚は彼にいくつかのシンプルなルールを覚えておくよう言いました；より信頼された／より信頼していないqubeへ<a href="https://www.qubes-os.org/doc/how-to-copy-and-paste-text/">テキスト</a>や<a href="https://www.qubes-os.org/doc/how-to-copy-and-move-files/">ファイル</a>をコピーや移動させないこと；表示された時にシステムを<a href="https://www.qubes-os.org/doc/how-to-update/">更新</a>すること；定期的に<a href="https://www.qubes-os.org/doc/how-to-back-up-restore-and-migrate/">バックアップ</a>をとること。ボブは新しいソフトウェアを試したり設定を調節したりする必要がないので、コマンドラインを使用することなく普段の作業を行うことができます。</p>
		</section>

		<h2>投資家 キャロル</h2>
		<section>
			<p>キャロルは熱心に働き、身の丈にあった生活をしているので、出費を節約し、節約したお金を将来のための投資にまわすことができます。彼女は経済的に独立し、場合によってはいつの日かアーリーリタイアすることを望んでいます。そしてこれを達成する最良の手は、長期に渡って投資し、投資と仕事を両立することであると判断しました。しかし、彼女の国の消費者金融保護法について調査した後、消費者が盗難や詐欺に遭った際の法的な保護が存在しないことを学びました。保険や保護を提供する様々な企業は金融機関の<b>破綻</b>にのみ回復を保証しており、これは個人の顧客がハッキングを受ける状況とはかなり異なります。さらには、多くの金融機関が独自のサイバー犯罪ポリシーを持っていますが、<b>顧客が</b>ハッキングを受けた際（金融機関に対してではなく）に弁償を明示的に保証するものはきわめてまれです。</p>
			<p>キャロルは泥棒が彼女が頑張って稼いだ資産をどのように盗もうとするのか念入りに調べ、その結果、彼女が考えもしなかったようなあらゆる手段があることを知り、驚きました。例えば、彼女はどんな泥棒でも最低限彼女の口座からお金を送金する必要があると考えていました。これは妥当な仮定に見えます。ですが彼女は「pump and dump」攻撃について知りました。これは泥棒がいくらかの株を買い、その後一般の人々の証券会社のアカウントに侵入し、そして被害者の残高を用いて同じ株を買います。株価は上がり(pumping)、泥棒は株を売る(dump)ことができ、価格の下がった株を持つ被害者が残されます。この場合、お金は被害者の口座から入出金すらされていません。株の売買に使用されただけです。この様な時には新しい銀行口座の追加を防いだり送金時に追加の承認を求めたりする安全策は被害者の資産を守る役に立ちません。そしてこれはほんの一例です！キャロルは既知の、特定の攻撃に対する安全策で十分だと仮定できないことをはっきり理解しました。彼女はセキュリティについてより基本的なレベルから考え、それを徹底的に彼女のデジタル生活に落とし込む必要がありました。</p>
			<p>学習の後、キャロルは彼女独自のサイバーセキュリティについて考えることを決めました。彼女は他の人々を頼れませんでした。確かに、殆どの人々は単に一般的な民生の技術を使い、それに満足しているかもしれません。ですが彼女は殆どの人々が失うものをそれほどは持っていないことを思い出しました。彼女が自分の未来をつかもうとしていること、特に政府による救済がないかもしれず、また証券会社によるサイバーセキュリティに関する曖昧な安心させるための宣伝文句に法的拘束力がないことを知ることはリスクではありません。なのでキャロルはコンピューターセキュリティについてさらに学び、最終的にWebで「最もセキュアなオペレーティングシステム」と検索した後でQubes OSに偶然出会いました。彼女はそれがどのようにデザインされ、そしてその理由について学びました。全ての技術的詳細についてすぐに理解したわけではありませんが、基本原理である<a href="https://www.qubes-os.org/doc/architecture">コンパートメント化によるセキュリティ</a>は直感的に理にかなっていると感じ、技術的な側面についてさらに学ぶと、これが探していたものだとさらにはっきり理解しました。今日では、彼女のセットアップは次のようになっています:</p>

			<img width=600 src="https://www.qubes-os.org/attachment/doc/howto_use_qubes_carol.png">

			<ul>
				<li><b>それぞれの投資会社と銀行用qube。</b>キャロルはいくつかの異なる退職金積立口座、証券口座、銀行口座を保有しています。彼女はそれぞれのqubeを各々の会社のWebサイトにのみアクセスする「セキュアな端末」のように扱っています。取引の実行とダウンロードした各種書類の保存はそれらのqube内で行われます。他のサイトへ誤ってアクセスしないようにするために、彼女は<a href="https://www.qubes-os.org/doc/firewall/">Qubes firewall</a>を使用しそれぞれの会社のWebサイトへのアクセスのみを有効にしています。このqube内での作業の殆どはWebサイトとPDFを用いたものなので、キャロルのアプリqubeの大半は<a href="https://www.qubes-os.org/doc/templates/minimal/">ミニマルテンプレート</a>にWebブラウザー（PDFビューワーとしても使用）とファイルマネージャーをインストールしたものがベースになっています。</li>
				<li><b>全てのクレジットカード口座を扱うqube。</b>キャロルはクレジットカード毎に別のqubeを作成し始めましたが、最終的にはこれを取りやめることを決断しました。一つには、彼女の国でのクレジットカード不正利用に対する顧客保護は、銀行や証券口座での盗難や詐欺によって資金を失うことに対するそれよりずっと優れており、セキュリティーリスクはそれほど高くありません。二つ目に、クレジットカードのオンラインアカウントや古い明細へのオンラインアクセスは、一般に資金の使用や送金に繋がらないため、攻撃者がこれらにアクセスできたとしてもできることはさほど多くはありません。なのでここでの最悪のシナリオは銀行や証券口座のそれと違って壊滅的とはならないでしょう。三つ目に、彼女はカード会社のWebサイトがお互いや彼女のqubeに接続されることをそれほど恐れてはいません。（それらが一つのqube内に内包されている限りは。このレベルのリスクを彼女は問題ないと考えています。）最後、そして特に、彼女はとても多くのクレジットカードを持っています！キャロルはとても倹約家なので、新しいカードを契約した際の登録特典の収集を好むので、かなりの数のカードが蓄積されています。（ですが、支払い額には常に注意しているため、利息を支払ったことはありません。彼女は払えるからや支出の要件を満たすからという理由でより多く使う誘惑に駆られず、どちらにせよ必要な支払いにのみ支出するようよく訓練されています。）とにかく、キャロルはそれぞれのクレジットカードのWebサイト毎に別々のqubeを用いることで得られる僅かな利点では、本当に多くのqubeを追加で管理する苦痛の割に合わないと判断しました。</li>
				<li><b>クレジットモニタリング、クレジットレポート、クレジットヒストリーサービス用のqube。</b>キャロルはよいクレジットスコアを築くために努力しており、そしてアイデンティティーの盗難を心配しているため、無料のクレジットモニタリングサービスの管理と無料の年間クレジットレポートのダウンロード用に一つのqubeを用いています。</li>
				<li><b>税のための二つのqube。</b>キャロルはWindows専用の税務ソフトウェアを実行するために<a href="https://github.com/Qubes-Community/Contents/blob/master/docs/os/windows/windows.md">Windows qube</a>を使用しています。また、税に関する全ての書類を年毎にまとめたオフラインの保管庫もあります。</li>
				<li><b>ファイナンシャル・プランニングと追跡のためのqube。</b>キャロルはスプレッドシートを愛しているので、このオフラインqubeは彼女が投資と貯蓄率を追跡するメインのスプレッドシートを管理する場所です。予算や保険のスプレッドシートや文章化された投資ポリシーもここで保管しています。このqubeはテンプレートにLibreOfficeとGnumeric（これでキャロルは独自のモンテカルロシミュレーションができます）といった追加の生産性ソフトウェアをインストールしたものをベースにしています。</li>
				<li><b>様々な電子メールqube。</b>キャロルは一つの電子メールqubeを最も重要な金融系のアカウントに、別の一つをクレジットカードや通販のアカウントや保険会社用に、もう一つを個人用に用いることを好みます。これらはすべてThunderbirdがインストールされた同じテンプレートを元にしています。</li>
				<li><b>パスワードマネージャー保管庫。</b>KeePassXCに全てのアカウントのユーザー名とパスワードを保管している、ネットワークから隔離されたqube。彼女はアカウントにログインする必要がある際には、<a href="https://www.qubes-os.org/doc/how-to-copy-and-paste-text">Qubesグローバルクリップボード</a>を用いて他のqubeへコピー＆ペーストしています。</li>
			</ul>

			<h3>追加: キャロルは新しい金融技術を試しています</h3>
		</section>
	</main>

	<footer>
		<a href="/about">このWebサイトについて</a>
	</footer>
</body>
</html>
